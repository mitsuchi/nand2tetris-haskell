# pop local 3

これをやりたい。これはつまり、
スタックからポップしてきて、それを RAM[local] + 3 番地 に入れ込むということだ。
つまり

RAX[X] = Y

ができればいい。

stack に
  |Y|
  |X|
SP| |
と積んである状況だとすると
SP|Y| A=M
  |X| D=M # D=Y (DレジスタにYを覚えておく)
  | |
から
  |Y| A=M # A=RAM[SP] (AにSPの指す番地を入れる)
SP|X| A=M # A=X (AレジスタにXを入れる)
  | | M=D # RAM[X]=Y (X番地にYを入れる)
とできればいい。

SP を2つ戻るのはどうする？
SP=SP-1 は
--
A=SP
M=M-1
--
でいいのだから、
--
A=SP
M=M-1
M=M-1
--
でいい。

というわけで、ROM[25] = 20
で試してみる。できた！
結局こうだ。

@SP
M=M-1
M=M-1
A=M
D=M
@SP
M=M+1
A=M
A=M
M=D
